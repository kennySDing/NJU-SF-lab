@startuml
|用户|
start

:打开天气App;

|系统|
:初始化应用;
:加载用户设置;

if (夜间模式?) then (是)
  :应用夜间主题;
else (否)
  :应用日间主题;
endif

:显示主界面;

|用户|
:用户选择位置;

|系统|
:获取当前天气数据;
:获取未来2小时天气预报;
:获取未来两周天气预报;
:显示天气信息;
:生成出行建议;

|用户|
fork
  :查看天气信息;
fork again
  :查看出行建议;
end fork
|系统|
fork
  :检测是否有恶劣天气;
  if (有恶劣天气?) then (是)
    :发送预警通知;
  endif
fork again
  :定时更新天气数据;
end fork

|用户|
partition 设置 {
  :进入设置界面;
  :调整设置 (夜间模式, 提醒阈值);
  :更换主题（可选）;
}

|系统|
:保存用户设置;
:应用设置更改;

if (用户关闭App?) then (是)
  stop
else (否)
  :等待用户下一步操作;
endif

@enduml
